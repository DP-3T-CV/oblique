<div class="default-layout">
	<h2 class="page-header d-flex justify-content-between">
		<span>Schema validation</span>
		<span class="fa fa-check text-success" ngbTooltip="Form is valid" placement="bottom"
			  *ngIf="form.valid"></span>
		<span class="fa fa-warning text-danger" ngbTooltip="Form is not valid" placement="bottom"
			  *ngIf="!form.valid"></span>
	</h2>
	<p class="lead">Use a custom <a href="http://json-schema.org/">JSON schema</a> in order to perform automatic form
		control validation.</p>
	<form id="schemaValidationForm" class="form-horizontal has-validation card" name="validationForm" role="form"
		  [orSchemaValidation]="schema" #form="ngForm">
		<div class="card-header">
			<h3 class="card-title">Preview</h3>
		</div>
		<div class="card-body">
			<div orFormControlState class="row form-group" [pristineValidation]="true">
				<label class="col-3 col-form-label">Text</label>
				<div class="col-8">
					<input name="text" type="text" placeholder="Text" class="form-control" ngModel
						   orSchemaValidate/>
					<or-error-messages></or-error-messages>
				</div>
				<div class="col-1 form-control-plaintext">
					<ng-template #textSchema>
						<pre>{{schema.properties.text | json}}</pre>
					</ng-template>
					<a class="form-control-static" role="button"
					   [ngbPopover]="textSchema" popoverTitle="Schema" placement="bottom">
						<span class="fa fa-sitemap"></span>
					</a>
				</div>
			</div>
			<div orFormControlState class="row form-group">
				<label class="col-3 col-form-label">Number</label>
				<div class="col-8">
					<input name="number" type="number" placeholder="Number" class="form-control"
						   ngModel orSchemaValidate/>
					<or-error-messages></or-error-messages>
				</div>
				<div class="col-1 form-control-plaintext">
					<ng-template #numberSchema>
						<pre>{{schema.properties.number | json}}</pre>
					</ng-template>
					<a class="form-control-static" role="button"
					   [ngbPopover]="numberSchema" popoverTitle="Schema" placement="bottom">
						<span class="fa fa-sitemap"></span>
					</a>
				</div>
			</div>
			<div orFormControlState class="row form-group">
				<label class="col-3 col-form-label">Integer</label>
				<div class="col-8">
					<input name="integer" type="number" placeholder="integer" class="form-control"
						   ngModel orSchemaValidate/>
					<or-error-messages></or-error-messages>
				</div>
				<div class="col-1">
					<ng-template #integerSchema>
						<pre>{{schema.properties.integer | json}}</pre>
					</ng-template>
					<a class="form-control-static" role="button"
					   [ngbPopover]="integerSchema" popoverTitle="Schema" placement="bottom">
						<span class="fa fa-sitemap"></span>
					</a>
				</div>
			</div>
			<div orFormControlState class="row form-group">
				<label class="col-3 col-form-label">Date</label>
				<div class="col-8">
					<or-date-picker>
						<input class="form-control" name="date" ngModel ngbDatepicker required>
					</or-date-picker>
					<or-error-messages></or-error-messages>
				</div>
				<div class="col-1">
					<ng-template #dateSchema>
						<pre>{{schema.properties.date | json}}</pre>
					</ng-template>
					<a class="form-control-static" role="button"
					   [ngbPopover]="dateSchema" popoverTitle="Schema" placement="bottom">
						<span class="fa fa-sitemap"></span>
					</a>
				</div>
			</div>
			<div orFormControlState class="row form-group">
				<label class="col-3 col-form-label">Textarea</label>
				<div class="col-8">
						<textarea name="textarea" type="text" class="form-control" placeholder="Textarea"
								  ngModel rows="1" orSchemaValidate></textarea>
					<or-error-messages></or-error-messages>
				</div>
				<div class="col-1">
					<ng-template #textareaSchema>
						<pre>{{schema.properties.textarea | json}}</pre>
					</ng-template>
					<a class="form-control-static" role="button"
					   [ngbPopover]="numberSchema" popoverTitle="Schema" placement="bottom">
						<span class="fa fa-sitemap"></span>
					</a>
				</div>
			</div>
			<fieldset ngModelGroup="name">
				<legend>
					<span>Name</span>
					<span class="pull-right">
							<ng-template #addressSchema>
								<pre>{{schema.properties.name | json}}</pre>
							</ng-template>
							<a class="form-control-static" role="button"
							   [ngbPopover]="addressSchema" popoverTitle="Schema" placement="bottom-right">
								<span class="fa fa-sitemap"></span>
							</a>
						</span>
				</legend>
				<div orFormControlState class="row form-group">
					<label class="col-3 col-form-label">First name</label>
					<div class="col-8">
						<input type="text" name="firstname" class="form-control" placeholder="First name"
							   ngModel orSchemaValidate>
						<or-error-messages></or-error-messages>
					</div>
					<div class="col-1">
						<ng-template #firstNameSchema>
							<pre>{{schema.properties.name.properties.firstname | json}}</pre>
						</ng-template>
						<a class="form-control-static" role="button"
						   [ngbPopover]="firstNameSchema" popoverTitle="Schema" placement="bottom">
							<span class="fa fa-sitemap"></span>
						</a>
					</div>
				</div>
				<div orFormControlState class="row form-group">
					<label class="col-3 col-form-label">Last name</label>
					<div class="col-8">
						<input type="text" name="lastname" class="form-control" placeholder="Last name"
							   ngModel orSchemaValidate>
						<or-error-messages></or-error-messages>
					</div>
					<div class="col-1">
						<ng-template #lastNameSchema>
							<pre>{{schema.properties.name.properties.lastname | json}}</pre>
						</ng-template>
						<a class="form-control-static" role="button"
						   [ngbPopover]="lastNameSchema" popoverTitle="Schema" placement="bottom">
							<span class="fa fa-sitemap"></span>
						</a>
					</div>
				</div>
			</fieldset>
		</div>
		<div class="card-footer">
			<div class="form-actions">
				<button type="reset" class="btn btn-default">Reset</button>
				<button type="submit" class="btn btn-primary">Check</button>
			</div>
		</div>
	</form>
	<div class="row">
		<div class="col-md-6">
			<h4>Full JSON schema</h4>
			<pre>{{schema | json}}</pre>
		</div>
		<div class="col-md-6">
			<h4>Model data</h4>
			<pre>{{form.value | json}}</pre>
			<h4>Form valid?</h4>
			<pre>{{form.valid | json}}</pre>
		</div>
	</div>
</div>
