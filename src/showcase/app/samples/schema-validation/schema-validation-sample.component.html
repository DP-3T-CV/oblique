<div class="default-layout">
	<h2 class="page-header">Schema validation</h2>
	<p class="lead">Use a custom <a href="http://json-schema.org/">JSON schema</a> in order to perform automatic form
		control validation.</p>
	<div class="row">
		<div class="col">
			<form id="schemaValidationForm" class="form-horizontal has-validation card" name="validationForm"
				  role="form" [orSchemaValidation]="schema" #templateForm="ngForm"
				  (submit)="check(templateForm)" (reset)="reset(templateForm)">
				<div class="card-header">
					<h3 class="card-title d-flex justify-content-between">
						Preview with template driven form
						<span class="fa fa-check text-success" ngbTooltip="Form is valid" placement="bottom"
							  *ngIf="templateForm.valid"></span>
						<span class="fa fa-warning text-danger" ngbTooltip="Form is not valid" placement="bottom"
							  *ngIf="!templateForm.valid"></span>
					</h3>
				</div>
				<div class="card-body">
					<div orFormControlState class="row form-group" [pristineValidation]="true">
						<label class="col-3 col-form-label">Text</label>
						<div class="col-8">
							<input name="text" type="text" placeholder="Text" class="form-control" ngModel
								   orSchemaValidate/>
							<or-error-messages></or-error-messages>
						</div>
						<div class="col-1 form-control-plaintext">
							<ng-template #textSchema>
								<pre>{{schema.properties.text | json}}</pre>
							</ng-template>
							<a class="form-control-static" role="button"
							   [ngbPopover]="textSchema" popoverTitle="Schema" placement="left">
								<span class="fa fa-sitemap"></span>
							</a>
						</div>
					</div>
					<div orFormControlState class="row form-group">
						<label class="col-3 col-form-label">Number</label>
						<div class="col-8">
							<input name="number" type="number" placeholder="Number" class="form-control"
								   ngModel orSchemaValidate/>
							<or-error-messages></or-error-messages>
						</div>
						<div class="col-1 form-control-plaintext">
							<ng-template #numberSchema>
								<pre>{{schema.properties.number | json}}</pre>
							</ng-template>
							<a class="form-control-static" role="button"
							   [ngbPopover]="numberSchema" popoverTitle="Schema" placement="left">
								<span class="fa fa-sitemap"></span>
							</a>
						</div>
					</div>
					<div orFormControlState class="row form-group">
						<label class="col-3 col-form-label">Integer</label>
						<div class="col-8">
							<input name="integer" type="number" placeholder="integer" class="form-control"
								   ngModel orSchemaValidate/>
							<or-error-messages></or-error-messages>
						</div>
						<div class="col-1">
							<ng-template #integerSchema>
								<pre>{{schema.properties.integer | json}}</pre>
							</ng-template>
							<a class="form-control-static" role="button"
							   [ngbPopover]="integerSchema" popoverTitle="Schema" placement="left">
								<span class="fa fa-sitemap"></span>
							</a>
						</div>
					</div>
					<div orFormControlState class="row form-group">
						<label class="col-3 col-form-label" for="templateDate">Date</label>
						<div class="col-8">
							<or-date-picker>
								<input id="templateDate" class="form-control" name="date" ngModel ngbDatepicker required>
							</or-date-picker>
							<or-error-messages></or-error-messages>
						</div>
						<div class="col-1">
							<ng-template #dateSchema>
								<pre>{{schema.properties.date | json}}</pre>
							</ng-template>
							<a class="form-control-static" role="button"
							   [ngbPopover]="dateSchema" popoverTitle="Schema" placement="left">
								<span class="fa fa-sitemap"></span>
							</a>
						</div>
					</div>
					<div orFormControlState class="row form-group">
						<label class="col-3 col-form-label" for="templateSelect">Select</label>
						<div class="col-8">
							<select id="templateSelect" name="select" class="form-control" ngModel orSchemaValidate>
								<option value="">Select</option>
								<option *ngFor="let item of schema.properties.select.options" value="{{item.value}}">{{item.label}}</option>
							</select>
							<or-error-messages></or-error-messages>
						</div>
						<div class="col-1">
							<ng-template #selectSchema>
								<pre>{{schema.properties.select | json}}</pre>
							</ng-template>
							<a class="form-control-static" role="button"
							   [ngbPopover]="selectSchema" popoverTitle="Schema" placement="left">
								<span class="fa fa-sitemap"></span>
							</a>
						</div>
					</div>
					<div orFormControlState class="row form-group">
						<label class="col-3 col-form-label">Textarea</label>
						<div class="col-8">
						<textarea name="textarea" type="text" class="form-control" placeholder="Textarea"
								  ngModel rows="1" orSchemaValidate></textarea>
							<or-error-messages></or-error-messages>
						</div>
						<div class="col-1">
							<ng-template #textareaSchema>
								<pre>{{schema.properties.textarea | json}}</pre>
							</ng-template>
							<a class="form-control-static" role="button"
							   [ngbPopover]="numberSchema" popoverTitle="Schema" placement="left">
								<span class="fa fa-sitemap"></span>
							</a>
						</div>
					</div>
					<fieldset ngModelGroup="name">
						<legend>
							<span>Name</span>
							<span class="pull-right">
								<ng-template #nameSchema>
									<pre>{{schema.properties.name | json}}</pre>
								</ng-template>
								<a class="form-control-static" role="button"
								   [ngbPopover]="nameSchema" popoverTitle="Schema" placement="left">
									<span class="fa fa-sitemap"></span>
								</a>
							</span>
						</legend>
						<div orFormControlState class="row form-group">
							<label class="col-3 col-form-label">First name</label>
							<div class="col-8">
								<input type="text" name="firstName" class="form-control" placeholder="First name"
									   ngModel orSchemaValidate>
								<or-error-messages></or-error-messages>
							</div>
							<div class="col-1">
								<ng-template #firstNameSchema>
									<pre>{{schema.properties.name.properties.firstName | json}}</pre>
								</ng-template>
								<a class="form-control-static" role="button"
								   [ngbPopover]="firstNameSchema" popoverTitle="Schema" placement="left">
									<span class="fa fa-sitemap"></span>
								</a>
							</div>
						</div>
						<div orFormControlState class="row form-group">
							<label class="col-3 col-form-label">Last name</label>
							<div class="col-8">
								<input type="text" name="lastName" class="form-control" placeholder="Last name"
									   ngModel orSchemaValidate>
								<or-error-messages></or-error-messages>
							</div>
							<div class="col-1">
								<ng-template #lastNameSchema>
									<pre>{{schema.properties.name.properties.lastName | json}}</pre>
								</ng-template>
								<a class="form-control-static" role="button"
								   [ngbPopover]="lastNameSchema" popoverTitle="Schema" placement="left">
									<span class="fa fa-sitemap"></span>
								</a>
							</div>
						</div>
						<fieldset ngModelGroup="address">
							<legend>
								<span>Address</span>
								<span class="pull-right">
								<ng-template #addressSchema>
									<pre>{{schema.properties.name.properties.address | json}}</pre>
								</ng-template>
								<a class="form-control-static" role="button"
								   [ngbPopover]="addressSchema" popoverTitle="Schema" placement="left">
									<span class="fa fa-sitemap"></span>
								</a>
							</span>
							</legend>
							<div orFormControlState class="row form-group">
								<label class="col-3 col-form-label">Street</label>
								<div class="col-8">
									<input type="text" name="street" class="form-control" placeholder="Street"
										   ngModel orSchemaValidate>
									<or-error-messages></or-error-messages>
								</div>
								<div class="col-1">
									<ng-template #streetSchema>
										<pre>{{schema.properties.name.properties.address.properties.street | json}}</pre>
									</ng-template>
									<a class="form-control-static" role="button"
									   [ngbPopover]="streetSchema" popoverTitle="Schema" placement="left">
										<span class="fa fa-sitemap"></span>
									</a>
								</div>
							</div>
							<div orFormControlState class="row form-group">
								<label class="col-3 col-form-label">Number</label>
								<div class="col-8">
									<input type="number" name="number" class="form-control" placeholder="Number"
										   ngModel orSchemaValidate>
									<or-error-messages></or-error-messages>
								</div>
								<div class="col-1">
									<ng-template #streetNumberSchema>
										<pre>{{schema.properties.name.properties.address.properties.number | json}}</pre>
									</ng-template>
									<a class="form-control-static" role="button"
									   [ngbPopover]="streetNumberSchema" popoverTitle="Schema" placement="left">
										<span class="fa fa-sitemap"></span>
									</a>
								</div>
							</div>
						</fieldset>
					</fieldset>
				</div>
				<div class="card-footer">
					<div class="form-actions">
						<button type="reset" class="btn btn-secondary">Reset</button>
						<button type="submit" class="btn btn-primary">Check</button>
					</div>
				</div>
			</form>
			<h4 class="mt-4">Model data</h4>
			<pre>{{templateForm.value | json}}</pre>
		</div>
		<div class="col">
			<form class="form-horizontal has-validation card" role="form"
				  [formGroup]="formData" (submit)="check()" (reset)="reset()">
				<div class="card-header">
					<h3 class="card-title d-flex justify-content-between">
						Preview with reactive form
						<span class="fa fa-check text-success" ngbTooltip="Form is valid" placement="bottom"
							  *ngIf="formData.valid"></span>
						<span class="fa fa-warning text-danger" ngbTooltip="Form is not valid" placement="bottom"
							  *ngIf="!formData.valid"></span>
					</h3>
				</div>
				<div class="card-body">
					<div orFormControlState class="row form-group" [pristineValidation]="true">
						<label class="col-3 col-form-label">Text</label>
						<div class="col-8">
							<input formControlName="text" type="text" placeholder="Text" class="form-control"/>
							<or-error-messages></or-error-messages>
						</div>
						<div class="col-1 form-control-plaintext">
							<a class="form-control-static" role="button"
							   [ngbPopover]="textSchema" popoverTitle="Schema" placement="left">
								<span class="fa fa-sitemap"></span>
							</a>
						</div>
					</div>
					<div orFormControlState class="row form-group">
						<label class="col-3 col-form-label">Number</label>
						<div class="col-8">
							<input formControlName="number" type="number" placeholder="Number" class="form-control"/>
							<or-error-messages></or-error-messages>
						</div>
						<div class="col-1 form-control-plaintext">
							<a class="form-control-static" role="button"
							   [ngbPopover]="numberSchema" popoverTitle="Schema" placement="left">
								<span class="fa fa-sitemap"></span>
							</a>
						</div>
					</div>
					<div orFormControlState class="row form-group">
						<label class="col-3 col-form-label">Integer</label>
						<div class="col-8">
							<input formControlName="integer" type="number" placeholder="integer" class="form-control"/>
							<or-error-messages></or-error-messages>
						</div>
						<div class="col-1">
							<a class="form-control-static" role="button"
							   [ngbPopover]="integerSchema" popoverTitle="Schema" placement="left">
								<span class="fa fa-sitemap"></span>
							</a>
						</div>
					</div>
					<div orFormControlState class="row form-group">
						<label class="col-3 col-form-label" for="reactiveDate">Date</label>
						<div class="col-8">
							<or-date-picker>
								<input id="reactiveDate" class="form-control" formControlName="date" ngbDatepicker>
							</or-date-picker>
							<or-error-messages></or-error-messages>
						</div>
						<div class="col-1">
							<a class="form-control-static" role="button"
							   [ngbPopover]="dateSchema" popoverTitle="Schema" placement="left">
								<span class="fa fa-sitemap"></span>
							</a>
						</div>
					</div>
					<div orFormControlState class="row form-group">
						<label class="col-3 col-form-label" for="reactiveSelect">Select</label>
						<div class="col-8">
							<select id="reactiveSelect" formControlName="select" class="form-control">
								<option value="">Select</option>
								<option *ngFor="let item of schema.properties.select.options" value="{{item.value}}">{{item.label}}</option>
							</select>
							<or-error-messages></or-error-messages>
						</div>
						<div class="col-1">
							<a class="form-control-static" role="button"
							   [ngbPopover]="selectSchema" popoverTitle="Schema" placement="left">
								<span class="fa fa-sitemap"></span>
							</a>
						</div>
					</div>
					<div orFormControlState class="row form-group">
						<label class="col-3 col-form-label">Textarea</label>
						<div class="col-8">
						<textarea formControlName="textarea" type="text" class="form-control" placeholder="Textarea"
								  rows="1"></textarea>
							<or-error-messages></or-error-messages>
						</div>
						<div class="col-1">
							<a class="form-control-static" role="button"
							   [ngbPopover]="numberSchema" popoverTitle="Schema" placement="left">
								<span class="fa fa-sitemap"></span>
							</a>
						</div>
					</div>
					<fieldset formGroupName="name">
						<legend>
							<span>Name</span>
							<span class="pull-right">
								<a class="form-control-static" role="button"
								   [ngbPopover]="nameSchema" popoverTitle="Schema" placement="left">
									<span class="fa fa-sitemap"></span>
								</a>
							</span>
						</legend>
						<div orFormControlState class="row form-group">
							<label class="col-3 col-form-label">First name</label>
							<div class="col-8">
								<input type="text" formControlName="firstName" class="form-control" placeholder="First name">
								<or-error-messages></or-error-messages>
							</div>
							<div class="col-1">
								<a class="form-control-static" role="button"
								   [ngbPopover]="firstNameSchema" popoverTitle="Schema" placement="left">
									<span class="fa fa-sitemap"></span>
								</a>
							</div>
						</div>
						<div orFormControlState class="row form-group">
							<label class="col-3 col-form-label">Last name</label>
							<div class="col-8">
								<input type="text" formControlName="lastName" class="form-control" placeholder="Last name">
								<or-error-messages></or-error-messages>
							</div>
							<div class="col-1">
								<a class="form-control-static" role="button"
								   [ngbPopover]="lastNameSchema" popoverTitle="Schema" placement="left">
									<span class="fa fa-sitemap"></span>
								</a>
							</div>
						</div>
						<fieldset formGroupName="address">
							<legend>
								<span>Address</span>
								<span class="pull-right">
									<a class="form-control-static" role="button"
									   [ngbPopover]="addressSchema" popoverTitle="Schema" placement="left">
										<span class="fa fa-sitemap"></span>
									</a>
								</span>
							</legend>
							<div orFormControlState class="row form-group">
								<label class="col-3 col-form-label">Street</label>
								<div class="col-8">
									<input type="text" formControlName="street" class="form-control" placeholder="Street">
									<or-error-messages></or-error-messages>
								</div>
								<div class="col-1">
									<ng-template #streetSchema>
										<pre>{{schema.properties.name.properties.address.properties.street | json}}</pre>
									</ng-template>
									<a class="form-control-static" role="button"
									   [ngbPopover]="streetSchema" popoverTitle="Schema" placement="left">
										<span class="fa fa-sitemap"></span>
									</a>
								</div>
							</div>
							<div orFormControlState class="row form-group">
								<label class="col-3 col-form-label">Number</label>
								<div class="col-8">
									<input type="number" formControlName="number" class="form-control" placeholder="Number">
									<or-error-messages></or-error-messages>
								</div>
								<div class="col-1">
									<a class="form-control-static" role="button"
									   [ngbPopover]="streetNumberSchema" popoverTitle="Schema" placement="left">
										<span class="fa fa-sitemap"></span>
									</a>
								</div>
							</div>
						</fieldset>
					</fieldset>
				</div>
				<div class="card-footer">
					<div class="form-actions">
						<button type="reset" class="btn btn-secondary">Reset</button>
						<button type="submit" class="btn btn-primary">Check</button>
					</div>
				</div>
			</form>
			<h4 class="mt-4">Model data</h4>
			<pre>{{formData.value | json}}</pre>
		</div>
	</div>
	<div class="row mt-2">
		<div class="col">
			<h4>Full JSON schema</h4>
			<pre>{{schema | json}}</pre>
		</div>
	</div>
</div>
